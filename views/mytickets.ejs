<%- include('header');%>
</body>
    <div id="verticalcontainer" class="container">
        <div class="justify-content-center">
            <div class= "col-12 col-sm-12 text-center mt-5">
                <div>
                    <h4 id="whitebold">My tickets :</h4>  
                </div>
            </div>
        </div>
    </div>

            <div class= "col-12 col-sm-12 text-center mt-5">
                    <div class="card-body">
                    <div class= "white" class="table-responsive">
                        <table id="order-info" class="table" width="100%" cellspacing="0">
                        <thead>
                            <thead>
                            <tr>
                                <th>N°</th>
                                <th>Journey</th>
                                <th>Date</th>
                                <th>Departure Time</th>
                                <th>Price</th>
                            </tr>
                            </thead>
                        </thead>

                        <tbody>
                            <% let total = 0
                             for (let i = 0; i< tickets.length; i ++){  
                                 total += tickets[i].price
                                 var newDateMonth = new Date(tickets[i].date).getMonth() 
                                 var newDateDay = new Date(tickets[i].date).getDate()
                                 %>
                            <tr>
                                <td id ="gras"><%= i +1 %></td>
                                <td><%= tickets[i].departure %> / <%= tickets[i].arrival %> </td>
                                <td><%= newDateDay %>/<%= newDateMonth + 1 %> </td>
                                <td><%= tickets[i].departureTime %></td>
                                <td><%= tickets[i].price %>€</td>
                            </tr>
                            <% } %>
                        </tbody>
                        <tfoot>
                            <tr class="list-group-item-action list-group-item-danger">
                                <td id="gras">Total</td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td><%= total %>€</td>
                            </tr>
                        </tfoot>
                        </table>
                    </div>
                    </div>
                    <div>
                        <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#exampleModal">Summary</button>
                    </div>
                        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLongTitle">My saved ticket</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <table id="order-info" class="table" width="100%" cellspacing="0">
                        <thead>
                            <thead>
                            <tr>
                                <th>Journey</th>
                                <th>Date</th>
                                <th>Departure Time</th>
                            </tr>
                            </thead>
                        </thead>
                        <tbody>
                            <% 
                             for (let i = 0; i< tickets.length; i ++){  
                                 var newDateMonth = new Date(tickets[i].date).getMonth()
                                 var newDateDay = new Date(tickets[i].date).getDate()
                                 %>
                            <tr>
                                <td><%= tickets[i].departure %> / <%= tickets[i].arrival %> </td>
                                <td><%= newDateDay %>/<%= newDateMonth +1  %> </td>
                                <td><%= tickets[i].departureTime %></td>
                            </tr>
                            <% } %>
                        </tbody>
                        </table>
                            </div>
                            <div class="modal-footer">
                                <a href="/mytrip?id=<%= id %>&confirm=true" type="button" class="btn btn-primary">Confirm</a>
                                <a href ="/journey" type="button" class="btn btn-danger">Go Home</button>
                            </div>
                            </div>
                        </div>
                </div>
            </div>


        <%- include('scripts');%>

    </body>
    </html>